import{P as I,p as we,k as ke,q as Ae,v as xe,x as m,y as Pe,a2 as W,S as Ie,Z as Re,z as _,W as Ee,B as u,D as Me,T as A,A as c,C as j,g as e,E as f,K as d,L as Be,s as h,N as Q,O as ee,l as De,X as Oe,F as g,H as x,U as P,a3 as Ne,a4 as Ge,I as S,R as te,a5 as Te,a6 as Ue,a7 as ze,a8 as He,a1 as Le}from"./PixelButton-F-003vX1.js";import"./phaser-DFK5Ua9d.js";class Fe extends I.Scene{character=null;currentAnimName="idle";currentSelection=null;constructor(){super({key:"CharacterPreviewScene"})}create(){this.scale.on("resize",this.onResize,this),this.game.events.emit("ready")}onResize(){this.character&&this.repositionCharacter()}getDisplayScale(){const o=Math.min(this.cameras.main.width,this.cameras.main.height);return Math.max(3,Math.floor(o/64*.65))}repositionCharacter(){if(!this.character)return;const o=this.cameras.main.width/2,v=this.cameras.main.height/2-this.cameras.main.height*.05,p=this.getDisplayScale();this.character.setPosition(o,v),this.character.setScale(p)}updateCharacter(o){this.currentSelection=o,we(this,o).then(()=>{this.buildOrUpdateCharacter()})}buildOrUpdateCharacter(){this.currentSelection&&(this.character?this.character.updateSelection(this.currentSelection):this.character=new ke(this,0,0,this.currentSelection,{animated:!0,animation:this.currentAnimName,scale:this.getDisplayScale()}),this.repositionCharacter(),this.character.playAnimation(this.currentAnimName))}playAnimation(o){this.currentAnimName=o,this.character&&this.character.playAnimation(o)}}var Ye=_("<button> </button>"),$e=_("<button> </button>"),Ve=_("<button> </button>"),Xe=_('<div class="subcategory-tabs svelte-pirbp0"></div>'),Ze=_('<button><div class="item-preview svelte-pirbp0"><img class="preview-img svelte-pirbp0"/></div> <span class="item-name svelte-pirbp0"> </span></button>'),qe=_('<button><div class="item-preview svelte-pirbp0"><img class="preview-img svelte-pirbp0"/></div> <span class="item-name svelte-pirbp0"> </span></button>'),Je=_('<div class="character-builder svelte-pirbp0"><header class="header svelte-pirbp0"><h1 class="svelte-pirbp0">Character Builder</h1> <!></header> <div class="main-content svelte-pirbp0"><div class="preview-section svelte-pirbp0"><div class="preview-container svelte-pirbp0"></div> <div class="animation-controls svelte-pirbp0"></div></div> <div class="selection-panel svelte-pirbp0"><div class="gender-toggle svelte-pirbp0"><button>Male</button> <button>Female</button></div> <div class="category-tabs svelte-pirbp0"></div> <!> <div class="items-grid svelte-pirbp0"><!></div></div></div></div>');function Ke(N,o){xe(o,!0);let v=m(null),p=m(null),s=m(Pe(W("male"))),y=m("skins"),R=m("chest"),re=te(()=>ze(e(s).gender)),ie=te(()=>Ue(e(s).gender));Ie(()=>{ve(),se()}),Re(()=>{e(v)?.destroy(!0),h(v,null)});function se(){if(!e(p))return;const t=e(p).getBoundingClientRect(),a=Math.floor(t.width)||400,i=Math.floor(t.height)||400,n={type:I.AUTO,width:a,height:i,parent:e(p),transparent:!0,pixelArt:!0,scale:{mode:I.Scale.RESIZE,autoCenter:I.Scale.CENTER_BOTH},scene:[Fe]};h(v,new I.Game(n),!0),e(v).events.once("ready",()=>{C()})}function G(t){e(s).gender!==t&&(h(s,W(t),!0),C())}function ne(t){e(s).skin=t.id,C()}function ce(t){e(s).hair=e(s).hair===t.id?null:t.id,C()}function le(t){const a=e(s).clothing.includes(t.id),i=e(s).clothing.filter(n=>He(n)?.subcategory!==t.subcategory);a?e(s).clothing=i:e(s).clothing=[...i,t.id],C()}function T(t){switch(t.category){case"skins":return e(s).skin===t.id;case"hair":return e(s).hair===t.id;case"clothing":return e(s).clothing.includes(t.id);default:return!1}}function U(t){switch(t.category){case"skins":ne(t);break;case"hair":ce(t);break;case"clothing":le(t);break}}function z(t){return Te(t)}function C(){if(!e(v))return;const t=e(v).scene.getScene("CharacterPreviewScene");t&&t.updateCharacter&&t.updateCharacter(e(s))}function oe(){localStorage.setItem("characterSelection",JSON.stringify(e(s)))}function ve(){const t=De();t&&h(s,t,!0)}function ue(){oe(),localStorage.setItem("useModularPlayer","true"),window.location.href="/"}let H=m("idle");const de=["idle","run"];function he(t){if(h(H,t,!0),!e(v))return;const a=e(v).scene.getScene("CharacterPreviewScene");a&&a.playAnimation&&a.playAnimation(t)}var L=Je(),F=c(L),pe=u(c(F),2);Ee(pe,{variant:"green",onclick:ue,children:(t,a)=>{var i=Oe("SAVE & PLAY");d(t,i)},$$slots:{default:!0}});var be=u(F,2),Y=c(be),$=c(Y);Me($,t=>h(p,t),()=>e(p));var ge=u($,2);A(ge,21,()=>de,P,(t,a)=>{var i=Ye();let n;i.__click=()=>he(e(a));var r=c(i);f(()=>{n=g(i,1,"anim-btn svelte-pirbp0",null,n,{active:e(H)===e(a)}),x(r,e(a))}),d(t,i)});var _e=u(Y,2),V=c(_e),E=c(V);let X;E.__click=()=>G("male");var Z=u(E,2);let q;Z.__click=()=>G("female");var J=u(V,2);A(J,21,()=>Ne,P,(t,a)=>{var i=$e();let n;i.__click=()=>h(y,e(a),!0);var r=c(i);f(()=>{n=g(i,1,"category-tab svelte-pirbp0",null,n,{active:e(y)===e(a)}),x(r,e(a))}),d(t,i)});var K=u(J,2);{var me=t=>{var a=Xe();A(a,21,()=>Ge,P,(i,n)=>{var r=Ve();let l;r.__click=()=>h(R,e(n),!0);var b=c(r);f(()=>{l=g(r,1,"subcategory-tab svelte-pirbp0",null,l,{active:e(R)===e(n)}),x(b,e(n))}),d(i,r)}),d(t,a)};j(K,t=>{e(y)==="clothing"&&t(me)})}var fe=u(K,2),Se=c(fe);{var ye=t=>{var a=Q(),i=ee(a);A(i,17,()=>e(ie)[e(R)],P,(n,r)=>{var l=Ze();let b;l.__click=()=>U(e(r));var w=c(l),k=c(w),M=u(w,2),B=c(M);f((D,O)=>{b=g(l,1,"item-btn svelte-pirbp0",null,b,D),S(l,"title",e(r).name),S(k,"src",O),S(k,"alt",e(r).name),x(B,e(r).name)},[()=>({selected:T(e(r))}),()=>z(e(r))]),d(n,l)}),d(t,a)},Ce=t=>{var a=Q(),i=ee(a);A(i,17,()=>e(re)[e(y)],P,(n,r)=>{var l=qe();let b;l.__click=()=>U(e(r));var w=c(l),k=c(w),M=u(w,2),B=c(M);f((D,O)=>{b=g(l,1,"item-btn svelte-pirbp0",null,b,D),S(l,"title",e(r).name),S(k,"src",O),S(k,"alt",e(r).name),x(B,e(r).name)},[()=>({selected:T(e(r))}),()=>z(e(r))]),d(n,l)}),d(t,a)};j(Se,t=>{e(y)==="clothing"?t(ye):t(Ce,!1)})}f(()=>{X=g(E,1,"gender-btn svelte-pirbp0",null,X,{active:e(s).gender==="male"}),q=g(Z,1,"gender-btn svelte-pirbp0",null,q,{active:e(s).gender==="female"})}),d(N,L),Be()}Ae(["click"]);const ae=document.getElementById("builder-root");if(!ae)throw new Error("builder-root element not found!");Le(Ke,{target:ae});
//# sourceMappingURL=builder-DzWtsHEi.js.map
