import{P as I,p as we,q as ke,x as Ae,y as xe,A as m,B as Pe,a5 as Q,V as Ie,a0 as Re,C as _,Z as Ee,E as u,G as Me,W as A,D as c,F as W,g as e,H as f,O as d,Q as Be,k as h,R as j,S as ee,v as De,_ as Oe,I as g,K as x,X as P,a6 as Ge,a7 as Ne,L as S,U as te,a8 as Ue,a9 as He,aa as Le,ab as Te,a4 as ze}from"./PixelButton-dWW54Xwy.js";import"./phaser-DFK5Ua9d.js";class Fe extends I.Scene{character=null;currentAnimName="idle";currentSelection=null;constructor(){super({key:"CharacterPreviewScene"})}create(){this.scale.on("resize",this.onResize,this),this.game.events.emit("ready")}onResize(){this.character&&this.repositionCharacter()}getDisplayScale(){const o=Math.min(this.cameras.main.width,this.cameras.main.height);return Math.max(3,Math.floor(o/64*.65))}repositionCharacter(){if(!this.character)return;const o=this.cameras.main.width/2,v=this.cameras.main.height/2-this.cameras.main.height*.05,p=this.getDisplayScale();this.character.setPosition(o,v),this.character.setScale(p)}updateCharacter(o){this.currentSelection=o,we(this,o).then(()=>{this.buildOrUpdateCharacter()})}buildOrUpdateCharacter(){this.currentSelection&&(this.character?this.character.updateSelection(this.currentSelection):this.character=new ke(this,0,0,this.currentSelection,{animated:!0,animation:this.currentAnimName,scale:this.getDisplayScale()}),this.repositionCharacter(),this.character.playAnimation(this.currentAnimName))}playAnimation(o){this.currentAnimName=o,this.character&&this.character.playAnimation(o)}}var Ve=_("<button> </button>"),Ye=_("<button> </button>"),$e=_("<button> </button>"),Xe=_('<div class="subcategory-tabs svelte-pirbp0"></div>'),Ze=_('<button><div class="item-preview svelte-pirbp0"><img class="preview-img svelte-pirbp0"/></div> <span class="item-name svelte-pirbp0"> </span></button>'),qe=_('<button><div class="item-preview svelte-pirbp0"><img class="preview-img svelte-pirbp0"/></div> <span class="item-name svelte-pirbp0"> </span></button>'),Je=_('<div class="character-builder svelte-pirbp0"><header class="header svelte-pirbp0"><h1 class="svelte-pirbp0">Character Builder</h1> <!></header> <div class="main-content svelte-pirbp0"><div class="preview-section svelte-pirbp0"><div class="preview-container svelte-pirbp0"></div> <div class="animation-controls svelte-pirbp0"></div></div> <div class="selection-panel svelte-pirbp0"><div class="gender-toggle svelte-pirbp0"><button>Male</button> <button>Female</button></div> <div class="category-tabs svelte-pirbp0"></div> <!> <div class="items-grid svelte-pirbp0"><!></div></div></div></div>');function Ke(G,o){xe(o,!0);let v=m(null),p=m(null),s=m(Pe(Q("male"))),y=m("skins"),R=m("chest"),re=te(()=>Le(e(s).gender)),ie=te(()=>He(e(s).gender));Ie(()=>{ve(),se()}),Re(()=>{e(v)?.destroy(!0),h(v,null)});function se(){if(!e(p))return;const t=e(p).getBoundingClientRect(),a=Math.floor(t.width)||400,i=Math.floor(t.height)||400,n={type:I.AUTO,width:a,height:i,parent:e(p),transparent:!0,pixelArt:!0,scale:{mode:I.Scale.RESIZE,autoCenter:I.Scale.CENTER_BOTH},scene:[Fe]};h(v,new I.Game(n),!0),e(v).events.once("ready",()=>{C()})}function N(t){e(s).gender!==t&&(h(s,Q(t),!0),C())}function ne(t){e(s).skin=t.id,C()}function ce(t){e(s).hair=e(s).hair===t.id?null:t.id,C()}function le(t){const a=e(s).clothing.includes(t.id),i=e(s).clothing.filter(n=>Te(n)?.subcategory!==t.subcategory);a?e(s).clothing=i:e(s).clothing=[...i,t.id],C()}function U(t){switch(t.category){case"skins":return e(s).skin===t.id;case"hair":return e(s).hair===t.id;case"clothing":return e(s).clothing.includes(t.id);default:return!1}}function H(t){switch(t.category){case"skins":ne(t);break;case"hair":ce(t);break;case"clothing":le(t);break}}function L(t){return Ue(t)}function C(){if(!e(v))return;const t=e(v).scene.getScene("CharacterPreviewScene");t&&t.updateCharacter&&t.updateCharacter(e(s))}function oe(){localStorage.setItem("characterSelection",JSON.stringify(e(s)))}function ve(){const t=De();t&&h(s,t,!0)}function ue(){oe(),localStorage.setItem("useModularPlayer","true"),window.location.href="/"}let T=m("idle");const de=["idle","run"];function he(t){if(h(T,t,!0),!e(v))return;const a=e(v).scene.getScene("CharacterPreviewScene");a&&a.playAnimation&&a.playAnimation(t)}var z=Je(),F=c(z),pe=u(c(F),2);Ee(pe,{variant:"green",onclick:ue,children:(t,a)=>{var i=Oe("SAVE & PLAY");d(t,i)},$$slots:{default:!0}});var be=u(F,2),V=c(be),Y=c(V);Me(Y,t=>h(p,t),()=>e(p));var ge=u(Y,2);A(ge,21,()=>de,P,(t,a)=>{var i=Ve();let n;i.__click=()=>he(e(a));var r=c(i);f(()=>{n=g(i,1,"anim-btn svelte-pirbp0",null,n,{active:e(T)===e(a)}),x(r,e(a))}),d(t,i)});var _e=u(V,2),$=c(_e),E=c($);let X;E.__click=()=>N("male");var Z=u(E,2);let q;Z.__click=()=>N("female");var J=u($,2);A(J,21,()=>Ge,P,(t,a)=>{var i=Ye();let n;i.__click=()=>h(y,e(a),!0);var r=c(i);f(()=>{n=g(i,1,"category-tab svelte-pirbp0",null,n,{active:e(y)===e(a)}),x(r,e(a))}),d(t,i)});var K=u(J,2);{var me=t=>{var a=Xe();A(a,21,()=>Ne,P,(i,n)=>{var r=$e();let l;r.__click=()=>h(R,e(n),!0);var b=c(r);f(()=>{l=g(r,1,"subcategory-tab svelte-pirbp0",null,l,{active:e(R)===e(n)}),x(b,e(n))}),d(i,r)}),d(t,a)};W(K,t=>{e(y)==="clothing"&&t(me)})}var fe=u(K,2),Se=c(fe);{var ye=t=>{var a=j(),i=ee(a);A(i,17,()=>e(ie)[e(R)],P,(n,r)=>{var l=Ze();let b;l.__click=()=>H(e(r));var w=c(l),k=c(w),M=u(w,2),B=c(M);f((D,O)=>{b=g(l,1,"item-btn svelte-pirbp0",null,b,D),S(l,"title",e(r).name),S(k,"src",O),S(k,"alt",e(r).name),x(B,e(r).name)},[()=>({selected:U(e(r))}),()=>L(e(r))]),d(n,l)}),d(t,a)},Ce=t=>{var a=j(),i=ee(a);A(i,17,()=>e(re)[e(y)],P,(n,r)=>{var l=qe();let b;l.__click=()=>H(e(r));var w=c(l),k=c(w),M=u(w,2),B=c(M);f((D,O)=>{b=g(l,1,"item-btn svelte-pirbp0",null,b,D),S(l,"title",e(r).name),S(k,"src",O),S(k,"alt",e(r).name),x(B,e(r).name)},[()=>({selected:U(e(r))}),()=>L(e(r))]),d(n,l)}),d(t,a)};W(Se,t=>{e(y)==="clothing"?t(ye):t(Ce,!1)})}f(()=>{X=g(E,1,"gender-btn svelte-pirbp0",null,X,{active:e(s).gender==="male"}),q=g(Z,1,"gender-btn svelte-pirbp0",null,q,{active:e(s).gender==="female"})}),d(G,z),Be()}Ae(["click"]);const ae=document.getElementById("builder-root");if(!ae)throw new Error("builder-root element not found!");ze(Ke,{target:ae});
//# sourceMappingURL=builder-CtcHytNW.js.map
